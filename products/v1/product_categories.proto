syntax = "proto3";

package products.v1;

import "shared/v1/validation.proto";

option cc_enable_arenas = true;
option go_package = "github.com/ahmad-khatib0-org/megacommerce-proto/gen/go/products/v1;v1";
option java_outer_classname = "ProductCategoriesProto";
option java_package = "org.megacommerce.products.v1";

message ProductCategory {
  string id = 1;
  string name = 2;
  repeated ProductSubcategory subcategories = 3;
}

message ProductSubcategory {
  string id = 1;
  string name = 2;
  map<string, ProductSubcategoryAttribute> attributes = 3;
}

// Top-level attribute with a typed validation
message ProductSubcategoryAttribute {
  // wither this attribute required or optional
  bool required = 1;
  // input, select, tags ...
  string type = 2;
  // reference id to the attributes table (E.g weight is common for many products types,
  // so instead rewriting it each time, we store it in another table)
  optional string refrence = 3;
  // for select type (E.g. ['white', 'black', ...])
  repeated string string_array = 4;
  // for select type (E.g. multiple colors)
  optional bool is_multiple = 5;
  // validation rules of this attribute
  shared.v1.ValidationField validation = 6;
}

// not related to database

message ProductCategories {
  repeated ProductCategory categories = 1;
}

message ProductCategoryWithoutSubcategories {
  string id = 1;
  string name = 2;
}

message ProductCategoriesWithoutSubcategories {
  repeated ProductCategoryWithoutSubcategories categories = 1;
}
